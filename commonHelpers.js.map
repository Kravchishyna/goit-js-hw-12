{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45554119-358c100a4851c47a3e0063778';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\n\n\n \n\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = new SimpleLightbox('.gallery a');\n\nexport function renderGallery(images, container) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags }) =>\n        `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n      <div class=\"photo-card\"> \n       <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </div> \n        </a>`\n    )\n    .join('');\n  container.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function toggleLoadMoreBtn(btn, totalHits, currentPage, perPage = 15) {\n  const totalLoadedImages = currentPage * perPage;\n  if (totalLoadedImages >= totalHits) {\n    btn.classList.add('is-hidden');\n    iziToast.info({\n      title: 'Info',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    btn.classList.remove('is-hidden');\n  }\n}\n\nexport function showLoader(loader) {\n  loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loader) {\n  loader.classList.add('is-hidden');\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function scrollToNewImages(container) {\n  const { height: cardHeight } = container.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, toggleLoadMoreBtn, showLoader, hideLoader, showError, scrollToNewImages } from './js/render-functions';\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst refs = {\n  form: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.form.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  currentQuery = event.currentTarget.elements.query.value.trim();\n  if (!currentQuery) return;\n\n  currentPage = 1; // Reset page for new search\n  refs.gallery.innerHTML = ''; // Clear previous results\n  refs.loadMoreBtn.classList.add('is-hidden'); // Hide Load More button\n\n  await fetchAndDisplayImages();\n}\n\nasync function onLoadMore() {\n  currentPage++;\n  await fetchAndDisplayImages();\n}\n\nasync function fetchAndDisplayImages() {\n  try {\n    showLoader(refs.loader);\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits, refs.gallery);\n    scrollToNewImages(refs.gallery);\n    toggleLoadMoreBtn(refs.loadMoreBtn, data.totalHits, currentPage);\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    hideLoader(refs.loader);\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","SimpleLightbox","renderGallery","images","container","markup","webformatURL","largeImageURL","tags","toggleLoadMoreBtn","btn","totalHits","currentPage","iziToast","showLoader","loader","hideLoader","showError","message","scrollToNewImages","cardHeight","currentQuery","refs","onSearch","onLoadMore","event","fetchAndDisplayImages","data"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CChBA,MAAMC,EAAU,IAAIC,EAAe,YAAY,EAExC,SAASC,EAAcC,EAAQC,EAAW,CAC/C,MAAMC,EAASF,EACZ,IACC,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,CAAM,IACpC,YAAYD,CAAa;AAAA;AAAA,mBAEdD,CAAY,UAAUE,CAAI;AAAA;AAAA,aAGxC,EACA,KAAK,EAAE,EACVJ,EAAU,mBAAmB,YAAaC,CAAM,EAChDL,EAAQ,QAAO,CACjB,CAEO,SAASS,EAAkBC,EAAKC,EAAWC,EAAaf,EAAU,GAAI,CACjDe,EAAcf,GACfc,GACvBD,EAAI,UAAU,IAAI,WAAW,EAC7BG,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACf,CAAK,GAEDH,EAAI,UAAU,OAAO,WAAW,CAEpC,CAEO,SAASI,EAAWC,EAAQ,CACjCA,EAAO,UAAU,OAAO,WAAW,CACrC,CAEO,SAASC,EAAWD,EAAQ,CACjCA,EAAO,UAAU,IAAI,WAAW,CAClC,CAEO,SAASE,EAAUC,EAAS,CACjCL,EAAS,MAAM,CACb,MAAO,QACP,QAASK,CACb,CAAG,CACH,CAEO,SAASC,EAAkBf,EAAW,CAC3C,KAAM,CAAE,OAAQgB,CAAU,EAAKhB,EAAU,kBAAkB,wBAC3D,OAAO,SAAS,CACd,IAAKgB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CCtDA,IAAIR,EAAc,EACdS,EAAe,GACnB,MAAMC,EAAO,CACX,KAAM,SAAS,cAAc,cAAc,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,YAAY,EAChD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAQ,EAC7CD,EAAK,YAAY,iBAAiB,QAASE,CAAU,EAErD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EACpBJ,EAAeI,EAAM,cAAc,SAAS,MAAM,MAAM,OACnDJ,IAELT,EAAc,EACdU,EAAK,QAAQ,UAAY,GACzBA,EAAK,YAAY,UAAU,IAAI,WAAW,EAE1C,MAAMI,EAAqB,EAC7B,CAEA,eAAeF,GAAa,CAC1BZ,IACA,MAAMc,EAAqB,CAC7B,CAEA,eAAeA,GAAwB,CACrC,GAAI,CACFZ,EAAWQ,EAAK,MAAM,EACtB,MAAMK,EAAO,MAAMjC,EAAY2B,EAAcT,CAAW,EACxDV,EAAcyB,EAAK,KAAML,EAAK,OAAO,EACrCH,EAAkBG,EAAK,OAAO,EAC9Bb,EAAkBa,EAAK,YAAaK,EAAK,UAAWf,CAAW,CAChE,OAAQb,EAAO,CACdkB,EAAUlB,EAAM,OAAO,CAC3B,QAAY,CACRiB,EAAWM,EAAK,MAAM,CACvB,CACH"}